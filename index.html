<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Sunflower Web</title>
</head>

<body style="margin:0; background:black; display:flex; justify-content:center; align-items:center; height:100vh;">

  <canvas id="canvas" width="600" height="600"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    // Fondo negro real
    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    fetch("sunflowers.json")
      .then(response => response.json())
      .then(data => {
        draw(data);
      })
      .catch(error => {
        console.error("Error cargando JSON:", error);
      });

    function draw(shapes) {
      shapes.forEach(shape => {

        // Ajuste seguro de color
        const r = Math.min(255, Math.max(0, Math.round(shape.color[0])));
        const g = Math.min(255, Math.max(0, Math.round(shape.color[1])));
        const b = Math.min(255, Math.max(0, Math.round(shape.color[2])));

        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;

        ctx.beginPath();

        shape.contour.forEach((point, index) => {
          const x = point[0];
          const y = point[1];

          if (index === 0) {
            ctx.moveTo(x, y);
          } else {
            ctx.lineTo(x, y);
          }
        });

        ctx.closePath();
        ctx.fill();
      });
    }
  </script>

</body>
</html>
